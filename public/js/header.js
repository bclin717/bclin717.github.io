$(document).ready(function(){var e=$(".header-nav-menubtn"),t=$(".header-nav-menu"),s=$(".header-nav-menu-item"),i=$(".header-nav-submenu"),l=e.is(":visible"),c=!1,d=!1;function r(){s.velocity({height:s.outerHeight()},{complete:function(){i.css({display:"none",opacity:0})}})}$(window).on("resize",Stun.utils.throttle(function(){(l=e.is(":visible"))?(i.removeClass("hide--force"),d&&(r(),d=!1)):i.css({display:"none",opacity:0})},200));var u=!0,h=$(".mode");$(document).on("click",function(){t.is(":visible")&&(l&&d&&(r(),d=!1),t.css({display:"none"}),c=!1),u&&(h.removeClass("mode--focus"),u=!1)}),Stun.utils.pjaxReloadHeader=function(){if(e=$(".header-nav-menubtn"),t=$(".header-nav-menu"),s=$(".header-nav-menu-item"),i=$(".header-nav-submenu"),l=e.is(":visible"),d=c=!1,CONFIG.nightMode&&CONFIG.nightMode.enable){var o=!1,n="night_mode";h=$(".mode"),u=!0,o=!!function(){var e=!1;try{parseInt(Stun.utils.Cookies().get(n))&&(e=!0)}catch(e){}return e}()&&(h.addClass("mode--checked"),h.addClass("mode--focus"),$("html").addClass("nightmode"),!0),$(".mode").on("click",function(e){e.stopPropagation(),o=!o,u=!0,Stun.utils.Cookies().set(n,o?1:0),h.toggleClass("mode--checked"),h.addClass("mode--focus"),$("html").toggleClass("nightmode")})}e.on("click",function(e){e.stopPropagation(),l&&c&&d&&(r(),d=!1),c=!c,t.velocity("stop").velocity({opacity:c?1:0},{duration:c?200:0,display:c?"block":"none"})});var a=!1;$(".header-nav-submenu-item").on("click",function(){a=!0}),s.on("click",function(e){if(l){var o=$(this).find(".header-nav-submenu");if(o.length){a?a=!1:e.stopPropagation();var n=s.outerHeight(),t=n+Math.floor(o.outerHeight())*o.length,i=0;i=$(this).outerHeight()>n?(d=!1,n):(d=!0,t),o.css({display:"block",opacity:1}),$(this).velocity("stop").velocity({height:i},{duration:300}).siblings().velocity({height:n},{duration:300})}}}),s.on("mouseenter",function(){var e=$(this).find(".header-nav-submenu");e.length&&(e.is(":visible")||(l?e.css({display:"block",opacity:1}):(e.removeClass("hide--force"),e.velocity("stop").velocity("transition.slideUpIn",{duration:200}))))}),s.on("mouseleave",function(){var e=$(this).find(".header-nav-submenu");e.length&&(l||(e.addClass("hide--force"),d=!1))})},Stun.utils.pjaxReloadScrollIcon=function(){CONFIG.header&&CONFIG.header.scrollDownIcon&&$(".header-banner-arrow").on("click",function(e){e.stopPropagation(),$("#container").velocity("scroll",{offset:$("#header").outerHeight()})})},Stun.utils.pjaxReloadHeader(),Stun.utils.pjaxReloadScrollIcon()});